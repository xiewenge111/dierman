<!DOCTYPE html>
<!--
BeyondAdmin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 1.0.0
Purchase: http://wrapbootstrap.com
-->

<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Head -->
<head>
    <meta charset="utf-8" />
    <title>帝尔曼后台管理系统</title>
    <title>Data Tables</title>

    <meta name="description" content="data tables" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8;pageEncoding=utf-8"/>
    <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">
   <!--Basic Styles-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/weather-icons.min.css" rel="stylesheet" />

    <!--Beyond styles-->
    <link id="beyond-link" href="assets/css/beyond.min.css" rel="stylesheet" />
    <link href="assets/css/demo.min.css" rel="stylesheet" />
    <link href="assets/css/typicons.min.css" rel="stylesheet" />
    <link href="assets/css/animate.min.css" rel="stylesheet" />
    <link id="skin-link" href="" rel="stylesheet" type="text/css" />

    <!--Page Related styles-->
    <link href="assets/css/dataTables.bootstrap.css" rel="stylesheet" />

    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="assets/js/skins.min.js"></script>
</head>
<!-- /Head -->
<!-- Body -->
<body>
<div class="navbar">
    <div class="navbar-inner">
        <div class="navbar-container">
            <!-- Navbar Barnd -->
            <div class="navbar-header pull-left">
                <a href="#" class="navbar-brand">
                    帝尔曼后台系统
                </a>
            </div>
            <!-- /Navbar Barnd -->
            <!-- Sidebar Collapse -->
            <div class="sidebar-collapse" id="sidebar-collapse">
                <i class="collapse-icon fa fa-bars"></i>
            </div>
        </div>
    </div>
</div>
<!-- /Navbar -->
<!-- Main Container -->
<div class="main-container container-fluid">
    <!-- Page Container -->
    <div class="page-container">
        <!-- Page Sidebar -->
        <div class="page-sidebar" id="sidebar">
            <ul class="nav sidebar-menu">
                <!--Dashboard-->
                <li>
                    <a href="memberManagement.html">
                        <i class="menu-icon glyphicon glyphicon-random"></i>
                        <span class="menu-text">会员信息</span>
                    </a>
                </li>
                <li>
                    <a href="communicationPlatform.html">
                        <i class="menu-icon glyphicon glyphicon-import"></i>
                        <span class="menu-text">留言信息</span>
                    </a>
                </li>
                <!--Pages-->

            </ul>
            <!-- /Sidebar Menu -->
        </div>
        <!-- /Page Sidebar -->
        <!-- Page Content -->
        <div class="page-content">
            <!-- Page Breadcrumb -->
            <div class="page-breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="#">帝尔曼</a>
                    </li>
                    <li>
                        <a href="#">后台管理</a>
                    </li>

                </ul>
            </div>
            <!-- /Page Breadcrumb -->
            <!-- Page Header -->
            <div class="page-header position-relative">
                <div class="header-title">
                    <h1>
                        <small>
                            <i class="fa fa-angle-right"></i>
                            会员信息
                        </small>
                    </h1>
                </div>
            </div>
            <!--search-->
            <div class="widget" style="margin:30px 20px 10px 20px">
                <div class="widget-body">
                    <div class="container-fluid">
                        <div class="col-xs-12 col-md-12">
                            <div class="widget">
                                <div class="widget-body">
                                    <table class="table table-striped table-hover table-bordered" id="editabledatatable">
                                        <thead>
                                        <tr role="row">
                                            <th  class="center ">
                                                会员姓名
                                            </th>
                                            <th  class="center ">
                                                会员电话
                                            </th>
                                            <th  class="center ">
                                                备注
                                            </th>
                                            <th  class="center ">
                                                注册时间
                                            </th>
                                            <th  class="center ">
                                                操作
                                            </th>
                                        </tr>
                                        </thead>

                                        <tbody id="tbody11">
                                        </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 模态框（Modal） -->
            <button id="aaaa" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#myModal">
                开始演示模态框
            </button>
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                修改会员信息
                            </h4>
                        </div>
                        <div class="modal-body">
                            <div class="input-group">
                                <span class="input-group-addon">会员姓名：</span>
                                <input type="text" class="form-control" id="userName_edit" readonly>
                            </div>
                            <div class="input-group">
                                <span class="input-group-addon">会员电话：</span>
                                <input type="text" class="form-control" id="moblie_edit" readonly>
                            </div>
                            <div class="input-group">
                                <span class="input-group-addon">会员备注：</span>
                                <input type="text" class="form-control" id="remark_edit">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal" id="close">关闭
                            </button>
                            <button type="button" class="btn btn-primary" onclick="submitEdit()">
                                提交更改
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>
        </div>
    </div>
</div>

<!-- /Page Content -->
</div>
<!-- /Page Container -->
<!-- Main Container -->
</div>

<script src="assets/js/jquery-2.0.3.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<!--Beyond Scripts-->
<script src="assets/js/beyond.min.js"></script>

<!--Page Related Scripts-->
<script src="assets/js/datatable/jquery.dataTables.min.js"></script>
<script src="assets/js/datatable/ZeroClipboard.js"></script>
<script src="assets/js/datatable/dataTables.tableTools.min.js"></script>
<script src="assets/js/datatable/dataTables.bootstrap.min.js"></script>
<script src="assets/js/datatable/datatables-init.js"></script>
<script>
    function editData(e) {
        var data =e.split("#");
        $("#userName_edit").val(data[0]);
        $("#moblie_edit").val(data[1]);
        $("#remark_edit").val(data[2]);
        $("#aaaa").click();
    }
    $(function () {
        $.ajax({
            url: "/dierman/queryVip",
            type: "get",
            dataType: "json",
            async : false,
            success: function (res) {
                $("#tbody11").empty();
                for(var i=0;i < res.length;i++){
                    var reqdata = res[i].mobile+"#"+res[i].vipName;
                    $("#tbody11").append(
                "<tr>"+
                    "<td>"+res[i].vipName+"</td>"+
                    "<td>"+res[i].mobile+"</td>"+
                    "<td>"+res[i].remark+"</td>"+
                    "<td>"+res[i].gmtCreateStr+"</td>"+
                    "<td>"+
                        "<button class='btn btn-info btn-xs edit' onclick='editData(\""+res[i].vipName+"#"+res[i].mobile+"#"+res[i].remark+"\")'><i class='fa fa-edit'></i> 修改</button>"+
                        "<a href='#' class='btn btn-danger btn-xs delete'><i class='fa fa-trash-o'></i> 删除</a>"+
                     "</td>"+
                  "</tr>"
                    );
                }
            }
        });
    });

    function submitEdit() {
        var usermoblie = $("#moblie_edit").val();
        var remark = $("#remark_edit").val();
        $.ajax({
            url: "/dierman/modifyVip",
            type: "post",
            dataType: "json",
            data :{
                "mobile":usermoblie,
                "remark":remark
            },
            success: function (res) {
                 if(res.returnCode == "0000") {
                     window.location.reload();
                 }

            }
        });
    }
//    InitiateSimpleDataTable.init();
//    InitiateEditableDataTable.init();
//    InitiateExpandableDataTable.init();
//    InitiateSearchableDataTable.init();
    //InitiateQueryData.init();
</script>
</body>
<!--  /Body -->
</html>
